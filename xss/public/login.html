<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title></title>
	<link rel="stylesheet" type="text/css" href="/node_modules/bootstrap/dist/css/bootstrap.css">
</head>
<body>
	<div class="container">
		<div class="row">
			<div class="col-md-12">
				<div class="cold-md-6 cold-md-offset-3">
					<div class="panel panel-danger">
						<div class="panel-heading">
							<h2>登陆页面</h2>
						</div>
						<div class="panel-body">
							<form onsubmit="login(event)">
								<div class="form-group">
									<label for="username" class="control-label">用户名</label>
									<input type="text" id="username" class="form-control">
								</div>
								<div class="form-group">
									<label for="password" class="control-label">密码</label>
									<input type="text" id="password" class="form-control">
								</div>
								<div class="form-group">
									<input type="submit" value="登录" class="btn btn-primary" />
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script type="text/javascript" src="/node_modules/jquery/dist/jquery.js"></script>
	<script type="text/javascript">
		function login(evt) {
			evt.preventDefault()
			let username = $("#username").val()
			let password = $("#password").val()
			$.post("/api/login", {
				username,
				password
			}).then(res => {
				// code 1
				if (res.code === 0) {
					// location.href = "/welcome"
					location.href = "/long.html"
				} else {
					alert(res.error)
				}
			})
		}
	</script>
</body>
</html>